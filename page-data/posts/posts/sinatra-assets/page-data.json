{"componentChunkName":"component---src-templates-post-template-js","path":"/posts//posts/sinatra-assets/","result":{"data":{"markdownRemark":{"id":"ae48386e-119e-565a-96f1-c95b98cb8483","html":"<h3 id=\"onstart\" style=\"position:relative;\"><a href=\"#onstart\" aria-label=\"onstart permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>onStart</h3>\n<p>Rails is one of the most popular frameworks right now. It contains a lot of magic, and that can often be credited to its asset pipeline. Frequently when I think of Sinatra I think of it as a slim downed version of Rails. It has its uses, and so does Rails, but what if we wanted to combine Sinatra with an asset pipeline. I decided to do a little digging, and after doing a little research, I discovered that their is only one good solution that exists right now. It is called the <a href=\"https://github.com/rstacruz/sinatra-assetpack\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Sinatra AssetPack</a>.</p>\n<h3 id=\"sinatra-assetpack\" style=\"position:relative;\"><a href=\"#sinatra-assetpack\" aria-label=\"sinatra assetpack permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Sinatra AssetPack</h3>\n<p>In order to get started using the Sinatra AssetPack you will need to add it to your Gemfile.</p>\n<div class=\"gatsby-highlight\" data-language=\"rubygemfile\"><pre class=\"language-rubygemfile\"><code class=\"language-rubygemfile\">gem &#39;sinatra-assetpack&#39;, :require =&gt; &#39;sinatra/assetpack&#39;</code></pre></div>\n<p>Then run bundle (or bundle install), and let it install. Once installed you can start taking advantage of the Sinatra AssetPack. I added it to the base of my Sinatra app, I would recommend you do the same.</p>\n<div class=\"gatsby-highlight\" data-language=\"rubybase\"><pre class=\"language-rubybase\"><code class=\"language-rubybase\">require &#39;sinatra/base&#39;\nrequire &#39;sinatra/assetpack&#39;\n\nclass MyApp &lt; Sinatra::Base\n  set :root, File.dirname(__FILE__)\n  set :views, settings.root + &#39;/views&#39;\n  set :public_folder, settings.root + &#39;/public&#39;\n\n  register Sinatra::AssetPack\n\n  assets {\n    serve &#39;/js&#39;,     from: &#39;app/js&#39;\n    serve &#39;/css&#39;,    from: &#39;app/css&#39;\n    serve &#39;/images&#39;, from: &#39;app/images&#39;\n\n    # Serve up JS per request\n    js :app, &#39;/js/app.js&#39;, [\n      &#39;/js/vendor/**/*.js&#39;,\n      &#39;/js/lib/**/*.js&#39;\n    ]\n\n    # Serve up CSS per request\n    css :application, &#39;/css/application.css&#39;, [\n      &#39;/css/screen.css&#39;\n    ]\n\n    # jsmin, yui, closure or uglify for js compression\n    js_compression  :uglify\n    # simple, sass, yui, or sqwish for css compression\n    css_compression :sass\n  }\n\n  get &#39;/&#39; do\n    haml :index\n  end\nend</code></pre></div>\n<p>With the Sinatra AssetPack you can minify/obfuscate your js and css files. It will help you clean up your routes as well. By serving up only the files you need, you can specify exactly what js and css files for your Sinatra app when hitting a particular route. I found out of all the available options, this was the simplest</p>\n<h3 id=\"the-pipeline\" style=\"position:relative;\"><a href=\"#the-pipeline\" aria-label=\"the pipeline permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The Pipeline</h3>\n<p>After configuring your app like I did above, you will be able to use the pipeline in your static files. In this example I am using haml. It is very simple to include your js/css/haml files using this type of pipeline.</p>\n<div class=\"gatsby-highlight\" data-language=\"hamlindex\"><pre class=\"language-hamlindex\"><code class=\"language-hamlindex\">= haml :browser_compat\n%html\n  %header\n    = haml :header # header contains != css :application\n  %body\n    .container\n      .navigation\n        = haml :navigation\n      .stage\n        = haml :stage\n      .footer\n        = haml :footer\n    #js_footer\n      != js :app</code></pre></div>\n<p>This results in very clean and readable haml. The pieces here are reusable, and by following this pipeline you start to modularize your Sinatra application. I hope more apps use this, as it brings the magic of Rails to Sinatra apps, which tend to be more simplistic.</p>\n<h3 id=\"onfinish\" style=\"position:relative;\"><a href=\"#onfinish\" aria-label=\"onfinish permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>onFinish</h3>\n<p>Not everyone will need an asset pipeline in their web app. This is for those that require a clean and reusable code base for an app that is based on Sinatra. I find that modularizing your js and css will help a lot. Especially when you get obfuscation for free with it. Sinatra can be a powerful web application framework, and tools like this can make it even better. If you require any assistance setting up Sinatra AssetPack let me know.</p>","fields":{"slug":"/posts//posts/sinatra-assets/","tagSlugs":["/tag/sinatra/","/tag/ruby/"]},"frontmatter":{"date":"2014-05-26T15:32:56.000Z","description":null,"tags":["Sinatra","Ruby"],"title":"Sinatra Assets","socialImage":null}}},"pageContext":{"slug":"/posts//posts/sinatra-assets/"}},"staticQueryHashes":["251939775","2857265606","401334301"]}