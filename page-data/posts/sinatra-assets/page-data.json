{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/sinatra-assets/","webpackCompilationHash":"7a76817dbaf0db308696","result":{"data":{"markdownRemark":{"id":"ae48386e-119e-565a-96f1-c95b98cb8483","html":"<h3 id=\"onstart\"><a href=\"#onstart\" aria-label=\"onstart permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>onStart</h3>\n<p>Rails is one of the most popular frameworks right now. It contains a lot of magic, and that can often be credited to its asset pipeline. Frequently when I think of Sinatra I think of it as a slim downed version of Rails. It has its uses, and so does Rails, but what if we wanted to combine Sinatra with an asset pipeline. I decided to do a little digging, and after doing a little research, I discovered that their is only one good solution that exists right now. It is called the <a href=\"https://github.com/rstacruz/sinatra-assetpack\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Sinatra AssetPack</a>.</p>\n<h3 id=\"sinatra-assetpack\"><a href=\"#sinatra-assetpack\" aria-label=\"sinatra assetpack permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Sinatra AssetPack</h3>\n<p>In order to get started using the Sinatra AssetPack you will need to add it to your Gemfile.</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\">gem <span class=\"token string\">'sinatra-assetpack'</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">:require</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token string\">'sinatra/assetpack'</span></code></pre></div>\n<p>Then run bundle (or bundle install), and let it install. Once installed you can start taking advantage of the Sinatra AssetPack. I added it to the base of my Sinatra app, I would recommend you do the same.</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token keyword\">require</span> <span class=\"token string\">'sinatra/base'</span>\n<span class=\"token keyword\">require</span> <span class=\"token string\">'sinatra/assetpack'</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MyApp</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">Sinatra</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Base</span>\n  set <span class=\"token symbol\">:root</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">File</span><span class=\"token punctuation\">.</span>dirname<span class=\"token punctuation\">(</span>__FILE__<span class=\"token punctuation\">)</span>\n  set <span class=\"token symbol\">:views</span><span class=\"token punctuation\">,</span> settings<span class=\"token punctuation\">.</span>root <span class=\"token operator\">+</span> <span class=\"token string\">'/views'</span>\n  set <span class=\"token symbol\">:public_folder</span><span class=\"token punctuation\">,</span> settings<span class=\"token punctuation\">.</span>root <span class=\"token operator\">+</span> <span class=\"token string\">'/public'</span>\n\n  register <span class=\"token constant\">Sinatra</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">AssetPack</span>\n\n  assets <span class=\"token punctuation\">{</span>\n    serve <span class=\"token string\">'/js'</span><span class=\"token punctuation\">,</span>     from<span class=\"token punctuation\">:</span> <span class=\"token string\">'app/js'</span>\n    serve <span class=\"token string\">'/css'</span><span class=\"token punctuation\">,</span>    from<span class=\"token punctuation\">:</span> <span class=\"token string\">'app/css'</span>\n    serve <span class=\"token string\">'/images'</span><span class=\"token punctuation\">,</span> from<span class=\"token punctuation\">:</span> <span class=\"token string\">'app/images'</span>\n\n    <span class=\"token comment\"># Serve up JS per request</span>\n    js <span class=\"token symbol\">:app</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'/js/app.js'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">'/js/vendor/**/*.js'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'/js/lib/**/*.js'</span>\n    <span class=\"token punctuation\">]</span>\n\n    <span class=\"token comment\"># Serve up CSS per request</span>\n    css <span class=\"token symbol\">:application</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'/css/application.css'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">'/css/screen.css'</span>\n    <span class=\"token punctuation\">]</span>\n\n    <span class=\"token comment\"># jsmin, yui, closure or uglify for js compression</span>\n    js_compression  <span class=\"token symbol\">:uglify</span>\n    <span class=\"token comment\"># simple, sass, yui, or sqwish for css compression</span>\n    css_compression <span class=\"token symbol\">:sass</span>\n  <span class=\"token punctuation\">}</span>\n\n  get <span class=\"token string\">'/'</span> <span class=\"token keyword\">do</span>\n    haml <span class=\"token symbol\">:index</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code></pre></div>\n<p>With the Sinatra AssetPack you can minify/obfuscate your js and css files. It will help you clean up your routes as well. By serving up only the files you need, you can specify exactly what js and css files for your Sinatra app when hitting a particular route. I found out of all the available options, this was the simplest</p>\n<h3 id=\"the-pipeline\"><a href=\"#the-pipeline\" aria-label=\"the pipeline permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The Pipeline</h3>\n<p>After configuring your app like I did above, you will be able to use the pipeline in your static files. In this example I am using haml. It is very simple to include your js/css/haml files using this type of pipeline.</p>\n<div class=\"gatsby-highlight\" data-language=\"haml\"><pre class=\"language-haml\"><code class=\"language-haml\"><span class=\"token punctuation\">=</span><span class=\"token code\"> haml <span class=\"token symbol\">:browser_compat</span></span>\n<span class=\"token tag\">%html</span>\n  <span class=\"token tag\">%header</span>\n    <span class=\"token punctuation\">=</span><span class=\"token code\"> haml <span class=\"token symbol\">:header</span> <span class=\"token comment\"># header contains != css :application</span></span>\n  <span class=\"token tag\">%body</span>\n    <span class=\"token tag\">.container</span>\n      <span class=\"token tag\">.navigation</span>\n        <span class=\"token punctuation\">=</span><span class=\"token code\"> haml <span class=\"token symbol\">:navigation</span></span>\n      <span class=\"token tag\">.stage</span>\n        <span class=\"token punctuation\">=</span><span class=\"token code\"> haml <span class=\"token symbol\">:stage</span></span>\n      <span class=\"token tag\">.footer</span>\n        <span class=\"token punctuation\">=</span><span class=\"token code\"> haml <span class=\"token symbol\">:footer</span></span>\n    <span class=\"token tag\">#js_footer</span>\n      <span class=\"token punctuation\">!=</span><span class=\"token code\"> js <span class=\"token symbol\">:app</span></span></code></pre></div>\n<p>This results in very clean and readable haml. The pieces here are reusable, and by following this pipeline you start to modularize your Sinatra application. I hope more apps use this, as it brings the magic of Rails to Sinatra apps, which tend to be more simplistic.</p>\n<h3 id=\"onfinish\"><a href=\"#onfinish\" aria-label=\"onfinish permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>onFinish</h3>\n<p>Not everyone will need an asset pipeline in their web app. This is for those that require a clean and reusable code base for an app that is based on Sinatra. I find that modularizing your js and css will help a lot. Especially when you get obfuscation for free with it. Sinatra can be a powerful web application framework, and tools like this can make it even better. If you require any assistance setting up Sinatra AssetPack let me know.</p>","fields":{"slug":"/posts/sinatra-assets/","tagSlugs":["/tag/sinatra/","/tag/ruby/"]},"frontmatter":{"date":"2014-05-26T15:32:56.000Z","description":null,"tags":["Sinatra","Ruby"],"title":"Sinatra Assets"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/posts/sinatra-assets/"}}}