
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Sinatra Assets - Dev Continuum</title>
  <meta name="author" content="Vincent Taverna">

  
  <meta name="description" content="onStart Rails is one of the most popular frameworks right now. It contains a lot of magic, and that can often be credited to its asset pipeline. &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://vinnymac.github.io/blog/2014/05/26/sinatra-assets">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Dev Continuum" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Dev Continuum</a></h1>
  
    <h2>Web and Android Development</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:vinnymac.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Sinatra Assets</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-05-26T15:32:56-04:00" pubdate data-updated="true">May 26<span>th</span>, 2014</time>
        
      </p>
    
  </header>


<div class="entry-content"><h3>onStart</h3>

<p>Rails is one of the most popular frameworks right now. It contains a lot of magic, and that can often be credited to its asset pipeline. Frequently when I think of Sinatra I think of it as a slim downed version of Rails. It has its uses, and so does Rails, but what if we wanted to combine Sinatra with an asset pipeline. I decided to do a little digging, and after doing a little research, I discovered that their is only one good solution that exists right now. It is called the <a href="https://github.com/rstacruz/sinatra-assetpack">Sinatra AssetPack</a>.</p>

<h3>Sinatra AssetPack</h3>

<p>In order to get started using the Sinatra AssetPack you will need to add it to your Gemfile.</p>

<figure class='code'><figcaption><span>Gemfile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">gem</span> <span class="s1">&#39;sinatra-assetpack&#39;</span><span class="p">,</span> <span class="ss">:require</span> <span class="o">=&gt;</span> <span class="s1">&#39;sinatra/assetpack&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then run bundle (or bundle install), and let it install. Once installed you can start taking advantage of the Sinatra AssetPack. I added it to the base of my Sinatra app, I would recommend you do the same.</p>

<figure class='code'><figcaption><span>Base</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">require</span> <span class="s1">&#39;sinatra/base&#39;</span>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;sinatra/assetpack&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">MyApp</span> <span class="o">&lt;</span> <span class="ss">Sinatra</span><span class="p">:</span><span class="ss">:Base</span>
</span><span class='line'>  <span class="n">set</span> <span class="ss">:root</span><span class="p">,</span> <span class="no">File</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="bp">__FILE__</span><span class="p">)</span>
</span><span class='line'>  <span class="n">set</span> <span class="ss">:views</span><span class="p">,</span> <span class="n">settings</span><span class="o">.</span><span class="n">root</span> <span class="o">+</span> <span class="s1">&#39;/views&#39;</span>
</span><span class='line'>  <span class="n">set</span> <span class="ss">:public_folder</span><span class="p">,</span> <span class="n">settings</span><span class="o">.</span><span class="n">root</span> <span class="o">+</span> <span class="s1">&#39;/public&#39;</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">register</span> <span class="ss">Sinatra</span><span class="p">:</span><span class="ss">:AssetPack</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">assets</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">serve</span> <span class="s1">&#39;/js&#39;</span><span class="p">,</span>     <span class="ss">from</span><span class="p">:</span> <span class="s1">&#39;app/js&#39;</span>
</span><span class='line'>    <span class="n">serve</span> <span class="s1">&#39;/css&#39;</span><span class="p">,</span>    <span class="ss">from</span><span class="p">:</span> <span class="s1">&#39;app/css&#39;</span>
</span><span class='line'>    <span class="n">serve</span> <span class="s1">&#39;/images&#39;</span><span class="p">,</span> <span class="ss">from</span><span class="p">:</span> <span class="s1">&#39;app/images&#39;</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># Serve up JS per request</span>
</span><span class='line'>    <span class="n">js</span> <span class="ss">:app</span><span class="p">,</span> <span class="s1">&#39;/js/app.js&#39;</span><span class="p">,</span> <span class="o">[</span>
</span><span class='line'>      <span class="s1">&#39;/js/vendor/**/*.js&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="s1">&#39;/js/lib/**/*.js&#39;</span>
</span><span class='line'>    <span class="o">]</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># Serve up CSS per request</span>
</span><span class='line'>    <span class="n">css</span> <span class="ss">:application</span><span class="p">,</span> <span class="s1">&#39;/css/application.css&#39;</span><span class="p">,</span> <span class="o">[</span>
</span><span class='line'>      <span class="s1">&#39;/css/screen.css&#39;</span>
</span><span class='line'>    <span class="o">]</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># jsmin, yui, closure or uglify for js compression</span>
</span><span class='line'>    <span class="n">js_compression</span>  <span class="ss">:uglify</span>
</span><span class='line'>    <span class="c1"># simple, sass, yui, or sqwish for css compression</span>
</span><span class='line'>    <span class="n">css_compression</span> <span class="ss">:sass</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">get</span> <span class="s1">&#39;/&#39;</span> <span class="k">do</span>
</span><span class='line'>    <span class="n">haml</span> <span class="ss">:index</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>With the Sinatra AssetPack you can minify/obfuscate your js and css files. It will help you clean up your routes as well. By serving up only the files you need, you can specify exactly what js and css files for your Sinatra app when hitting a particular route. I found out of all the available options, this was the simplest</p>

<h3>The Pipeline</h3>

<p>After configuring your app like I did above, you will be able to use the pipeline in your static files. In this example I am using haml. It is very simple to include your js/css/haml files using this type of pipeline.</p>

<figure class='code'><figcaption><span>Index</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='haml'><span class='line'><span class="p">=</span> <span class="n">haml</span> <span class="ss">:browser_compat</span>
</span><span class='line'><span class="nt">%html</span>
</span><span class='line'>  <span class="nt">%header</span>
</span><span class='line'>    <span class="p">=</span> <span class="n">haml</span> <span class="ss">:header</span> <span class="c1"># header contains != css :application</span>
</span><span class='line'>  <span class="nt">%body</span>
</span><span class='line'>    <span class="nc">.container</span>
</span><span class='line'>      <span class="nc">.navigation</span>
</span><span class='line'>        <span class="p">=</span> <span class="n">haml</span> <span class="ss">:navigation</span>
</span><span class='line'>      <span class="nc">.stage</span>
</span><span class='line'>        <span class="p">=</span> <span class="n">haml</span> <span class="ss">:stage</span>
</span><span class='line'>      <span class="nc">.footer</span>
</span><span class='line'>        <span class="p">=</span> <span class="n">haml</span> <span class="ss">:footer</span>
</span><span class='line'>    <span class="nf">#js_footer</span>
</span><span class='line'>      <span class="p">!=</span> <span class="n">js</span> <span class="ss">:app</span>
</span></code></pre></td></tr></table></div></figure>


<p>This results in very clean and readable haml. The pieces here are reusable, and by following this pipeline you start to modularize your Sinatra application. I hope more apps use this, as it brings the magic of Rails to Sinatra apps, which tend to be more simplistic.</p>

<h3>onFinish</h3>

<p>Not everyone will need an asset pipeline in their web app. This is for those that require a clean and reusable code base for an app that is based on Sinatra. I find that modularizing your js and css will help a lot. Especially when you get obfuscation for free with it. Sinatra can be a powerful web application framework, and tools like this can make it even better. If you require any assistance setting up Sinatra AssetPack let me know.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Vincent Taverna</span></span>

      








  


<time datetime="2014-05-26T15:32:56-04:00" pubdate data-updated="true">May 26<span>th</span>, 2014</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/ruby/'>Ruby</a>, <a class='category' href='/blog/categories/sinatra/'>Sinatra,</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://vinnymac.github.io/blog/2014/05/26/sinatra-assets/" data-via="kidtheflash" data-counturl="http://vinnymac.github.io/blog/2014/05/26/sinatra-assets/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/05/18/boxview/" title="Previous Post: BoxView">&laquo; BoxView</a>
      
      
        <a class="basic-alignment right" href="/blog/2014/06/11/boxviewrb/" title="Next Post: boxviewrb">boxviewrb &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite">

<script type="text/javascript">
      var disqus_shortname = 'devcontinuum';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://vinnymac.github.io/blog/2014/05/26/sinatra-assets/';
        var disqus_url = 'http://vinnymac.github.io/blog/2014/05/26/sinatra-assets/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>

<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/06/11/boxviewrb/">Boxviewrb</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/05/26/sinatra-assets/">Sinatra Assets</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/05/18/boxview/">BoxView</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/05/11/fragment-factories/">Fragment Factories</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/05/05/promises-and-more/">Promises and More</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/vinnymac">@vinnymac</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'vinnymac',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Vincent Taverna -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'devcontinuum';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://vinnymac.github.io/blog/2014/05/26/sinatra-assets/';
        var disqus_url = 'http://vinnymac.github.io/blog/2014/05/26/sinatra-assets/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
