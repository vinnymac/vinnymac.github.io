<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Sinatra, | Dev Continuum]]></title>
  <link href="http://vinnymac.github.io/blog/categories/sinatra/atom.xml" rel="self"/>
  <link href="http://vinnymac.github.io/"/>
  <updated>2014-05-26T16:13:13-04:00</updated>
  <id>http://vinnymac.github.io/</id>
  <author>
    <name><![CDATA[Vincent Taverna]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Sinatra Assets]]></title>
    <link href="http://vinnymac.github.io/blog/2014/05/26/sinatra-assets/"/>
    <updated>2014-05-26T15:32:56-04:00</updated>
    <id>http://vinnymac.github.io/blog/2014/05/26/sinatra-assets</id>
    <content type="html"><![CDATA[<h3>onStart</h3>

<p>Rails is one of the most popular frameworks right now. It contains a lot of magic, and that can often be credited to its asset pipeline. Frequently when I think of Sinatra I think of it as a slim downed version of Rails. It has its uses, and so does Rails, but what if we wanted to combine Sinatra with an asset pipeline. I decided to do a little digging, and after doing a little research, I discovered that their is only one good solution that exists right now. It is called the <a href="https://github.com/rstacruz/sinatra-assetpack">Sinatra AssetPack</a>.</p>

<h3>Sinatra AssetPack</h3>

<p>In order to get started using the Sinatra AssetPack you will need to add it to your Gemfile.</p>

<p><code>ruby Gemfile
gem 'sinatra-assetpack', :require =&gt; 'sinatra/assetpack'
</code></p>

<p>Then run bundle (or bundle install), and let it install. Once installed you can start taking advantage of the Sinatra AssetPack. I added it to the base of my Sinatra app, I would recommend you do the same.</p>

<p>```ruby Base
require &lsquo;sinatra/base&rsquo;
require &lsquo;sinatra/assetpack&rsquo;</p>

<p>class MyApp &lt; Sinatra::Base
  set :root, File.dirname(<strong>FILE</strong>)
  set :views, settings.root + &lsquo;/views&rsquo;
  set :public_folder, settings.root + &lsquo;/public&rsquo;</p>

<p>  register Sinatra::AssetPack</p>

<p>  assets {</p>

<pre><code>serve '/js',     from: 'app/js'
serve '/css',    from: 'app/css'
serve '/images', from: 'app/images'

# Serve up JS per request
js :app, '/js/app.js', [
  '/js/vendor/**/*.js',
  '/js/lib/**/*.js'
]

# Serve up CSS per request
css :application, '/css/application.css', [
  '/css/screen.css'
]

# jsmin, yui, closure or uglify for js compression
js_compression  :uglify
# simple, sass, yui, or sqwish for css compression
css_compression :sass
</code></pre>

<p>  }</p>

<p>  get &lsquo;/&rsquo; do</p>

<pre><code>haml :index
</code></pre>

<p>  end
end
```</p>

<p>With the Sinatra AssetPack you can minify/obfuscate your js and css files. It will help you clean up your routes as well. By serving up only the files you need, you can specify exactly what js and css files for your Sinatra app when hitting a particular route. I found out of all the available options, this was the simplest</p>

<h3>The Pipeline</h3>

<p>After configuring your app like I did above, you will be able to use the pipeline in your static files. In this example I am using haml. It is very simple to include your js/css/haml files using this type of pipeline.</p>

<p>```haml Index
= haml :browser_compat
%html
  %header</p>

<pre><code>= haml :header # header contains != css :application
</code></pre>

<p>  %body</p>

<pre><code>.container
  .navigation
    = haml :navigation
  .stage
    = haml :stage
  .footer
    = haml :footer
#js_footer
  != js :app
</code></pre>

<p>```</p>

<p>This results in very clean and readable haml. The pieces here are reusable, and by following this pipeline you start to modularize your Sinatra application. I hope more apps use this, as it brings the magic of Rails to Sinatra apps, which tend to be more simplistic.</p>

<h3>onFinish</h3>

<p>Not everyone will need an asset pipeline in their web app. This is for those that require a clean and reusable code base for an app that is based on Sinatra. I find that modularizing your js and css will help a lot. Especially when you get obfuscation for free with it. Sinatra can be a powerful web application framework, and tools like this can make it even better. If you require any assistance setting up Sinatra AssetPack let me know.</p>
]]></content>
  </entry>
  
</feed>
