
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Dev Continuum</title>
  <meta name="author" content="Vincent Taverna">

  
  <meta name="description" content="onStart Android fragments can become a big garbled mess of spaghetti code. I have seen it happen again and again. Other developers I have worked &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://vinnymac.github.io/blog/page/2">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Dev Continuum" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Dev Continuum</a></h1>
  
    <h2>Web and Android Development</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:vinnymac.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/11/fragment-factories/">Fragment Factories</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-05-11T20:22:59-04:00" pubdate data-updated="true">May 11<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>onStart</h3>

<p>Android fragments can become a big garbled mess of spaghetti code. I have seen it happen again and again. Other developers I have worked alongside and I agree that generating fragments with the use of factory methods will make your code cleaner and more reusable. Although the material I go over here will mainly pertain to Android, it should help anyone who understands the basics of java. Fragments are the butter to the bread of android apps. They allow for a disconnect of the inner workings of your application. When instantiating a new instance of a fragment you will often want to pass in a bundle of arguments that can be used throughout the lifetime of that fragment. By using factories you create a special place for argument passing to occur. Things become more interesting as you dive deeper into more complex fragments. For now we will begin by taking a look at extending the Android ListFragment.</p>

<figure class='code'><figcaption><span>An Example ListFragment</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseListFragment</span> <span class="kd">extends</span> <span class="n">ListFragment</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* No Base Factories */</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* You can override the usual onCreate/onPause/onResume methods here. */</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Lists of information are some of the most important screens in applications these days. Whether they are on your phone or your desktop, lists are where it is at. Just go to google or reddit and you can see how important a good list is. An Android ListFragment is the tool given to you for free in order to make a list in the android ecosystem. By creating a base list fragment in your android application you let yourself abstract the tools you need in every list away from the busy work. It becomes especially important to do this as the application you are building will surely get more and more complicated. It always happens, and helping yourself early in this regard can only make the development process easier.</p>

<h3>Fragment Generation</h3>

<p>So now that we have our BaseListFragment we can start generating our fragments by extending that class. We are able to override any of the methods we retain from our extended class, and we can add any new ones we may need as well. As you might have already realized I chose not to put a factory in my base class. Some may argue that the base class should be able to be used just like any of the other classes that extend it, but in this case I chose to leave the factory out. By not having a Factory method in the base, you restrict yourself to only generating classes that have extended your base. Leaving your base practically unusable otherwise. Feel free to go against the grain here and try doing this how you like. But I believe that factories do not belong in base classes. Look at the class below for an example of how to create factories in your fragments.</p>

<figure class='code'><figcaption><span>A Fragment Factory</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CatGifListFragment</span> <span class="kd">extends</span> <span class="n">BaseListFragment</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Just a unique string identifier for use in a fragment transaction. */</span>
</span><span class='line'>  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">FRAGMENT_CAT_GIFS</span> <span class="o">=</span> <span class="s">&quot;fragment_cat_gifs&quot;</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">public</span> <span class="kd">static</span> <span class="n">CatGifListFragment</span> <span class="nf">newInstance</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">CatGifListFragment</span> <span class="n">f</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CatGifListFragment</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">Bundle</span> <span class="n">args</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Bundle</span><span class="o">();</span>
</span><span class='line'>    <span class="cm">/* Any extra arguments you might want to add. */</span>
</span><span class='line'>    <span class="n">f</span><span class="o">.</span><span class="na">setArguments</span><span class="o">(</span><span class="n">args</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">f</span><span class="o">;</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>New Instance</h3>

<p>Now that our CatGifListFragment has a method that can return an instantiated copy of itself, let&rsquo;s show it off. In order to show a fragment we can use a fragment manager in an Activity after some user interaction. Below I have an example of a user clicking on a view element called list_cats. This could be anything, but the idea is that it will display our fragment on screen after being clicked. By calling newInstance on our CatGifListFragment we are returning an instantiated version of the class that will contain any arguments we pass into the newInstance method. Simply call show after generating the fragment to display it.</p>

<figure class='code'><figcaption><span>New Fragment Instance</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CatActivity</span> <span class="kd">extends</span> <span class="n">BaseActivity</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* After some user interaction lets show the cat gif list fragment. */</span>
</span><span class='line'>  <span class="nd">@Override</span>
</span><span class='line'>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="n">View</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="na">getId</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">FragmentTransaction</span> <span class="n">ft</span> <span class="o">=</span> <span class="n">getSupportFragmentManager</span><span class="o">().</span><span class="na">beginTransaction</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">switch</span> <span class="o">(</span><span class="n">id</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>      <span class="k">case</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">list_cats</span><span class="o">:</span>
</span><span class='line'>        <span class="cm">/* You would pass in any arguments you wanted access to in the fragment here. */</span>
</span><span class='line'>        <span class="n">CatGifListFragment</span> <span class="n">catGifListFragment</span> <span class="o">=</span> <span class="n">CatGifListFragment</span><span class="o">.</span><span class="na">newInstance</span><span class="o">();</span>
</span><span class='line'>        <span class="n">catGifListFragment</span><span class="o">.</span><span class="na">show</span><span class="o">(</span><span class="n">ft</span><span class="o">,</span> <span class="n">CatGifListFragment</span><span class="o">.</span><span class="na">FRAGMENT_CAT_GIFS</span><span class="o">);</span>
</span><span class='line'>        <span class="k">break</span><span class="o">;</span>
</span><span class='line'>      <span class="k">default</span><span class="o">:</span>
</span><span class='line'>        <span class="k">break</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is just one example of displaying a fragment. There are countless ways that you could display a fragment, but the way in which you instantiate it is vital. Notice that CatActivity extends a base class as well. Keeping this in mind throughout your application will lead to cleaner code. Cleaner code will make your development process improve, so please keep this in mind throughout every piece of work your produce.</p>

<h3>onFinish</h3>

<p>If you find yourself reusing similar fragments over and over these tips will be even more helpful to you. Dialog and List fragments being some of the most frequent ones I see in android. Not everyone shares as many cat gifs as my coworkers do, but when they do I want them to be doing it efficiently. Look over your android apps, and review how you instantiated your fragments in your activities. Most android apps I have seen are doing this horribly wrong. If you have a cleaner and more efficient way of instantiating them than this, I would love to hear about it. Also if you have any questions, feel free to ask as always!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/05/promises-and-more/">Promises and More</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-05-05T12:30:53-04:00" pubdate data-updated="true">May 5<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>onStart</h3>

<p>I&rsquo;ve recently begun using promises in my javascript and even now I understand how useful they can be. I have come across many tools in the last year that I have found to be helpful. Certain situations have just appeared very hard, and then suddenly the perfect tool would allow me to continue on and overcome a hurdle. Promises are a tool such as that.</p>

<h3>jQuery Deferreds</h3>

<p>Although jQuery Deferred promises aren&rsquo;t A+ Compliant, I still find them to be very useful. Often when writing Backbone.Marionette apps I have needed to make a major change to a view and immediately after do some work. This happens in almost ever view in every app I have worked on. Say you need to navigate to another part of the app but first require closing the view the user is looking at. Calling the close or remove method on your view will often do the trick, but when you have extra work, timing becomes important. In many examples, I see people calling the event, and then executing the close. This does work, but is only working because of timing. If you use a jquery deferred you can execute the event after the closing of the view.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='coffeescript'><span class='line'><span class="nv">$deferred = </span><span class="nx">$</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">()</span>
</span><span class='line'><span class="nx">$deferred</span><span class="p">.</span><span class="nx">resolve</span> <span class="nx">@close</span><span class="p">()</span>
</span><span class='line'><span class="nx">$deferred</span><span class="p">.</span><span class="nx">done</span> <span class="nf">-&gt;</span> <span class="nx">App</span><span class="p">.</span><span class="nx">vent</span><span class="p">.</span><span class="nx">trigger</span> <span class="s">&#39;show:dialog&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Image Loading with jQuery Promises</h3>

<p>Many libraries exist to load images, but I like to rock my own. Using jQuery Deferred promises you can go a step further with image loading. Javascript offers an image object which has a few callbacks on it. onLoad, onError, and onAbort can be used with jQuery promises so that you can be sure that the image has succeeded or failed at loading properly.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='coffeescript'><span class='line'><span class="nv">imageLoader = </span><span class="nf">(url) -&gt;</span>
</span><span class='line'>  <span class="nv">loadImage = </span><span class="nf">(deferred) -&gt;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nv">loaded = </span><span class="nf">-&gt;</span>
</span><span class='line'>      <span class="nx">unbindEvents</span><span class="p">()</span>
</span><span class='line'>      <span class="nx">deferred</span><span class="p">.</span><span class="nx">resolve</span> <span class="nx">image</span>
</span><span class='line'>
</span><span class='line'>    <span class="nv">errored = </span><span class="nf">-&gt;</span>
</span><span class='line'>      <span class="nx">unbindEvents</span><span class="p">()</span>
</span><span class='line'>      <span class="nx">deferred</span><span class="p">.</span><span class="nx">reject</span> <span class="nx">image</span>
</span><span class='line'>
</span><span class='line'>    <span class="nv">unbindEvents = </span><span class="nf">-&gt;</span>
</span><span class='line'>      <span class="nv">image.onload = </span><span class="kc">null</span>
</span><span class='line'>      <span class="nv">image.onerror = </span><span class="kc">null</span>
</span><span class='line'>      <span class="nv">image.onabort = </span><span class="kc">null</span>
</span><span class='line'>
</span><span class='line'>    <span class="nv">image = </span><span class="k">new</span> <span class="nx">Image</span><span class="p">()</span>
</span><span class='line'>    <span class="nv">image.onload = </span><span class="nx">loaded</span>
</span><span class='line'>    <span class="nv">image.onerror = </span><span class="nx">errored</span>
</span><span class='line'>    <span class="nv">image.onabort = </span><span class="nx">errored</span>
</span><span class='line'>
</span><span class='line'>    <span class="nv">image.src = </span><span class="nx">url</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># promise causes the resolve/reject methods to not be accessible.</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">(</span><span class="nx">loadImage</span><span class="p">).</span><span class="nx">promise</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>With the above imageLoader you could do something like the example below.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='coffeescript'><span class='line'><span class="nv">$promise = </span><span class="nx">imageLoader</span> <span class="s">&#39;http://catgif.com/cat.gif&#39;</span>
</span><span class='line'><span class="nx">$promise</span><span class="p">.</span><span class="nx">done</span> <span class="nf">(image) -&gt;</span> <span class="nx">$</span><span class="p">(</span><span class="s">&#39;.loading&#39;</span><span class="p">).</span><span class="nx">replaceWith</span> <span class="nx">image</span>
</span><span class='line'><span class="nx">$promise</span><span class="p">.</span><span class="nx">fail</span> <span class="nf">-&gt;</span> <span class="nx">$</span><span class="p">(</span><span class="s">&#39;.loading&#39;</span><span class="p">).</span><span class="nx">replaceWith</span> <span class="s">&#39;&lt;img src=&quot;sadface.png&quot;&gt;&lt;/img&gt;&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>A+ Promises</h3>

<p>A promise is an eventual result of an asynchronous operation. Many people have argued over exactly what the terminology should be and how the inner workings should work. If you aren&rsquo;t looking to argue about this, and just want to take advantage of promises. I recommend starting with q. <a href="http://documentup.com/kriskowal/q/">Q is an A+ compliant library</a>, and it works using the expected when then format.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='coffeescript'><span class='line'><span class="c1"># Normal Q Promise structure</span>
</span><span class='line'><span class="nx">Q</span><span class="p">.</span><span class="nx">fcall</span> <span class="nx">step1</span>
</span><span class='line'><span class="p">.</span><span class="nx">then</span> <span class="nx">step2</span>
</span><span class='line'><span class="p">.</span><span class="nx">then</span> <span class="nx">step3</span>
</span><span class='line'><span class="p">.</span><span class="nx">then</span> <span class="nf">(value) -&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="nx">value</span>
</span><span class='line'><span class="p">.</span><span class="nx">catch</span> <span class="nf">(error) -&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="nx">error</span>
</span><span class='line'><span class="p">.</span><span class="nx">done</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Any function that returns a promise</span>
</span><span class='line'><span class="nv">promise = </span><span class="nx">@climber</span><span class="p">()</span>
</span><span class='line'><span class="nx">promise</span><span class="p">.</span><span class="nx">when</span> <span class="nx">@climbAMountain</span><span class="p">()</span> <span class="c1"># A when is a static then</span>
</span><span class='line'><span class="nx">promise</span><span class="p">.</span><span class="nx">then</span> <span class="nx">@fallDown</span><span class="p">()</span>
</span><span class='line'><span class="p">.</span><span class="nx">catch</span> <span class="nf">(error) -&gt;</span>
</span><span class='line'>  <span class="c1"># A note on Q promises:</span>
</span><span class='line'>  <span class="c1"># It will catch any errors while you are climbing or falling</span>
</span><span class='line'><span class="p">.</span><span class="nx">done</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Q also offers a try catch finally block</span>
</span><span class='line'><span class="nv">promise = </span><span class="nx">@anotherPromise</span><span class="p">()</span>
</span><span class='line'><span class="nx">promise</span><span class="p">.</span><span class="nx">then</span> <span class="c1"># try some work</span>
</span><span class='line'><span class="nx">promise</span><span class="p">.</span><span class="nx">catch</span> <span class="c1"># catch some error</span>
</span><span class='line'><span class="nx">promise</span><span class="p">.</span><span class="nx">fin</span> <span class="c1"># finally do thing</span>
</span></code></pre></td></tr></table></div></figure>


<p>Q is a very flexible promise library. It allows you to chain promises and execute arrays of promises. It is easy to use, and combined with coffeescript becomes one of the most readable solutions.</p>

<h3>Tools</h3>

<p>Promises are great and have helped dig me out of a lot of holes. Having helpers to assist you along the way when building a web app makes development more enjoyable and relaxing. I&rsquo;ll share some of the other tools that I use to help me along the way. Many people might be thinking why build my own when I can just download something like UnderscoreJS. Libraries are great, but occassionally you come up with a great piece that you just carry with you. I recommend building your own set and improving upon them. Share them with the developers you work with and just spread the word.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='coffeescript'><span class='line'><span class="c1"># Cleanup video and audio elements when you are done with them.</span>
</span><span class='line'><span class="nv">cleanupMedia: </span><span class="nf">($media) -&gt;</span>
</span><span class='line'>  <span class="k">return</span> <span class="k">unless</span> <span class="nx">$media</span><span class="p">.</span><span class="nx">length</span>
</span><span class='line'>  <span class="nx">$media</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">pause</span><span class="p">()</span>
</span><span class='line'>  <span class="nx">$media</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nv">src = </span><span class="s">&#39;&#39;</span>
</span><span class='line'>  <span class="nx">$media</span><span class="p">.</span><span class="nx">children</span><span class="p">(</span><span class="s">&#39;source&#39;</span><span class="p">).</span><span class="nx">prop</span> <span class="s">&#39;src&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span>
</span><span class='line'>  <span class="nx">$media</span><span class="p">.</span><span class="nx">remove</span><span class="p">().</span><span class="nv">length = </span><span class="mi">0</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Methods to check for HTML5 Video and Audio Support</span>
</span><span class='line'><span class="nv">supports_video: </span><span class="nf">-&gt;</span> <span class="o">!!</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s">&#39;video&#39;</span><span class="p">).</span><span class="nx">canPlayType</span>
</span><span class='line'><span class="nv">supports_audio: </span><span class="nf">-&gt;</span> <span class="o">!!</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s">&#39;audio&#39;</span><span class="p">).</span><span class="nx">canPlayType</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Move the cursor to the end of an input</span>
</span><span class='line'><span class="nv">$.fn.focusToEnd = </span><span class="nf">-&gt;</span> <span class="nx">@each</span> <span class="nf">-&gt;</span>
</span><span class='line'>  <span class="nv">v = </span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">focus</span><span class="p">().</span><span class="nx">val</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">).</span><span class="nx">val</span> <span class="nx">v</span>
</span><span class='line'><span class="c1"># Then do this:</span>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s">&#39;.input&#39;</span><span class="p">).</span><span class="nx">focusToEnd</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># A contains method for the String class</span>
</span><span class='line'><span class="k">if</span> <span class="o">not</span> <span class="nb">String</span><span class="o">::</span><span class="nx">contains</span> <span class="k">then</span> <span class="nb">String</span><span class="o">::</span><span class="nv">contains = </span><span class="nf">-&gt;</span> <span class="nb">String</span><span class="o">::</span><span class="nx">indexOf</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">)</span> <span class="o">isnt</span> <span class="o">-</span><span class="mi">1</span>
</span><span class='line'><span class="c1"># Use it like so:</span>
</span><span class='line'><span class="s">&quot;apple&quot;</span><span class="p">.</span><span class="nx">contains</span> <span class="s">&#39;app&#39;</span> <span class="c1"># returns true</span>
</span></code></pre></td></tr></table></div></figure>


<h3>onFinish</h3>

<p>A promise is not the swiss army knife of javascript tools. However it will get you out of hard and ugly situations with asynchronous code. $.ajax, $.post, and $.get all return deferreds that you can then listen in on. That is where the .done, .fail, .always methods come from in asnychronous jquery. Promises are a great way to finish the job, and at any time. Promise libraries exist other than Q, and I would recommend reading about the various other ones before deciding on Q. May promises help you in your developments. If you have any questions feel free to ask, I will respond, I promise.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/3/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/05/26/sinatra-assets/">Sinatra Assets</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/05/18/boxview/">BoxView</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/05/11/fragment-factories/">Fragment Factories</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/05/05/promises-and-more/">Promises and More</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/28/html5-video-and-audio/">HTML5 Video and Audio</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/vinnymac">@vinnymac</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'vinnymac',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Vincent Taverna -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'devcontinuum';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
