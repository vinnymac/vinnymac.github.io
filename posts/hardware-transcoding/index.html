<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.08b6f1b92a40a3f4c705.css" id="gatsby-global-css">html{font-size:100}body{margin:0 0 0 calc(100vw - 100%);color:#222;line-height:1.625;font-size:1rem;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body,h1,h2,h3,h4,h5,h6{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif}h1,h2,h3,h4,h5,h6{font-weight:600}h1{font-size:2.5rem;line-height:3.25rem;margin-top:6.5rem;margin-bottom:1.625rem}h2{font-size:1.6875rem;line-height:2.4375rem}h2,h3{margin-top:3.25rem;margin-bottom:.8125rem}h3{font-size:1.375rem;line-height:1.625rem}h4{font-size:1.2rem;margin-top:2.4375rem}h4,h5{line-height:1.625rem;margin-bottom:.8125rem}h5,h6{font-size:1rem;margin-top:4.0625rem}h6{line-height:1.625rem;margin-bottom:.8125rem}img{max-width:100%;margin:inherit auto}hr,img{border:0;display:block}hr{color:#222;height:1.625rem;margin:3.25rem auto;background-size:100% 26px;background-image:linear-gradient(180deg,transparent 1px,transparent 11px,#222 0,#222 15px,transparent 0,transparent 26px);width:6.25rem}a{color:#5d93ff;text-decoration:none}a:active,a:focus,a:hover{color:#f7a046}b,strong{font-weight:600}ul{list-style:square;margin-bottom:1.625rem}ul li{padding:0 .3125rem;margin-bottom:.625rem}p{line-height:1.625rem;margin-bottom:1.625rem}blockquote{padding:0;font-style:italic;text-align:center}figure{display:block;width:100%;height:auto}figcaption{line-height:1.21875rem;margin-top:.40625rem;color:#222;font-size:.875rem;font-style:italic;margin-bottom:0;text-align:center}.anchor{margin-left:-1.875rem!important;padding-right:.875rem!important}@media screen and (min-width:685px){figure.float-left,figure.float-right{max-width:19.375rem;padding:0 1.625rem}.float-right{float:right}.float-left{float:left}}code[class*=language-],pre[class*=language-]{color:#657b83;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#073642}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdf6e3}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{color:#657b83;background:#eee8d5}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.class-name,.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.Author-module--author__photo--36xCH{display:inline-block;margin-bottom:0;border-radius:50%;background-clip:padding-box}.Author-module--author__title--2CaTb{font-size:1.125rem;font-weight:600;line-height:1.82813rem;margin:.8125rem 0}.Author-module--author__title-link--Yrism,.Author-module--author__title-link--Yrism:focus,.Author-module--author__title-link--Yrism:hover{color:#222}.Author-module--author__subtitle--cAaEB{color:#888;line-height:1.625rem;margin-bottom:1.625rem}.Icon-module--icon--Gpyvw{display:inline-block;width:1em;height:1em;stroke-width:0;stroke:currentColor;fill:currentColor;font-style:normal;font-weight:400;speak:none;margin-right:.2em;text-align:center;font-variant:normal;text-transform:none;line-height:1em;margin-left:.2em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.Contacts-module--contacts--1rGd1{margin-bottom:1.625rem}.Contacts-module--contacts__list--3OgdW{display:flex;flex-flow:row wrap;flex-grow:0;flex-shrink:0;list-style:none;padding:0;margin:.625rem -.1875rem;width:8.75rem}.Contacts-module--contacts__list-item--16p9q{padding:0;margin:.25rem;display:flex;align-content:center;align-items:center;justify-content:center;height:2.1875rem;width:2.1875rem;line-height:2.1875rem;border-radius:50%;text-align:center;border:1px solid #ebebeb}.Contacts-module--contacts__list-item-link--2MIDn{border:0;display:flex;color:#222}.Contacts-module--contacts__list-item-link--2MIDn:focus,.Contacts-module--contacts__list-item-link--2MIDn:hover{color:#5d93ff}.Copyright-module--copyright--1ariN{color:#b6b6b6;font-size:.875rem}.Menu-module--menu--Efbin{margin-bottom:1.625rem}.Menu-module--menu__list--31Zeo{list-style:none;padding:0;margin:0}.Menu-module--menu__list-item--1lJ6B{padding:0;margin:.625rem 0}.Menu-module--menu__list-item-link--10Ush{font-size:1rem;color:#222;font-weight:400;border:0}.Menu-module--menu__list-item-link--10Ush:focus,.Menu-module--menu__list-item-link--10Ush:hover{color:#5d93ff;border-bottom:1px solid #5d93ff}.Menu-module--menu__list-item-link--active--2CbUO{color:#222;border-bottom:1px solid #222}.Sidebar-module--sidebar--X4z2p{width:100%}.Sidebar-module--sidebar__inner--Jdc5s{position:relative;padding:1.5625rem 1.25rem 0}@media screen and (min-width:685px){.Sidebar-module--sidebar--X4z2p{width:calc(41.625% - 1.09375rem)}.Sidebar-module--sidebar--X4z2p:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Sidebar-module--sidebar--X4z2p:last-child{margin-right:0}.Sidebar-module--sidebar--X4z2p:nth-child(12n){margin-right:0;float:right}.Sidebar-module--sidebar--X4z2p:nth-child(12n+1){clear:both}.Sidebar-module--sidebar__inner--Jdc5s{padding:1.875rem 1.25rem 0}.Sidebar-module--sidebar__inner--Jdc5s:after{background:#e6e6e6;background:linear-gradient(180deg,#e6e6e6 0,#e6e6e6 48%,#fff);position:absolute;content:"";width:.0625rem;height:33.75rem;top:30px;right:-10px;bottom:0}}@media screen and (min-width:960px){.Sidebar-module--sidebar--X4z2p{width:calc(33.3% - 1.25rem)}.Sidebar-module--sidebar--X4z2p:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Sidebar-module--sidebar--X4z2p:last-child{margin-right:0}.Sidebar-module--sidebar--X4z2p:nth-child(3n){margin-right:0;float:right}.Sidebar-module--sidebar--X4z2p:nth-child(3n+1){clear:both}.Sidebar-module--sidebar__inner--Jdc5s{padding:2.5rem}}.Layout-module--layout--3Pyz6{max-width:66.875rem;margin-left:auto;margin-right:auto}.Layout-module--layout--3Pyz6:before{content:"";display:table}.Layout-module--layout--3Pyz6:after{content:"";display:table;clear:both}.Feed-module--feed__item--2D5rE{margin-bottom:2.03125rem}.Feed-module--feed__item--2D5rE:last-child{margin-bottom:.8125rem}.Feed-module--feed__item-title--3nigr{font-size:1.6875rem;line-height:2.4375rem;margin-top:0;margin-bottom:.8125rem}.Feed-module--feed__item-title-link--iFMRs{color:#222}.Feed-module--feed__item-title-link--iFMRs:focus,.Feed-module--feed__item-title-link--iFMRs:hover{color:#222;border-bottom:1px solid #222}.Feed-module--feed__item-description--1uO8e{font-size:1rem;line-height:1.625rem;margin-bottom:1.21875rem}.Feed-module--feed__item-meta-time--3t1fg{font-size:.875rem;color:#222;font-weight:600;text-transform:uppercase}.Feed-module--feed__item-meta-divider--N-Q0A{margin:0 .3125rem}.Feed-module--feed__item-meta-category-link--23f8F{font-size:.875rem;color:#f7a046;font-weight:600;text-transform:uppercase}.Feed-module--feed__item-meta-category-link--23f8F:focus,.Feed-module--feed__item-meta-category-link--23f8F:hover{color:#5d93ff}.Feed-module--feed__item-readmore--1u6bI{font-size:1rem;color:#5d93ff}.Feed-module--feed__item-readmore--1u6bI:focus,.Feed-module--feed__item-readmore--1u6bI:hover{color:#5d93ff;border-bottom:1px solid #5d93ff}.Page-module--page--2nMky{margin-bottom:3.25rem}.Page-module--page__inner--2M_vz{padding:1.5625rem 1.25rem}.Page-module--page__title--GPD8L{font-size:2.5rem;font-weight:600;line-height:3.25rem;margin-top:0;margin-bottom:2.35625rem}.Page-module--page__body--Ic6i6{font-size:1rem;line-height:1.625rem;margin:0 0 1.625rem}@media screen and (min-width:685px){.Page-module--page--2nMky{width:calc(58.275% - .78125rem)}.Page-module--page--2nMky:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Page-module--page--2nMky:last-child{margin-right:0}.Page-module--page--2nMky:nth-child(12n){margin-right:0;float:right}.Page-module--page--2nMky:nth-child(12n+1){clear:both}.Page-module--page__inner--2M_vz{padding:1.875rem 1.25rem}}@media screen and (min-width:960px){.Page-module--page--2nMky{width:calc(66.6% - .625rem)}.Page-module--page--2nMky:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Page-module--page--2nMky:last-child{margin-right:0}.Page-module--page--2nMky:nth-child(3n){margin-right:0;float:right}.Page-module--page--2nMky:nth-child(3n+1){clear:both}.Page-module--page__inner--2M_vz{padding:2.5rem 2.1875rem}}.Pagination-module--pagination--2H3nO{margin-top:3.25rem;display:flex}.Pagination-module--pagination__prev--bet5s{width:50%;text-align:left}.Pagination-module--pagination__prev-link--1Nzs6{color:#f7a046;font-size:1.625rem;font-weight:700}.Pagination-module--pagination__prev-link--1Nzs6:focus,.Pagination-module--pagination__prev-link--1Nzs6:hover{color:#5d93ff}.Pagination-module--pagination__prev-link--disable--Yklx9{pointer-events:none;color:#bbb}.Pagination-module--pagination__next--3hFiN{width:50%;text-align:right}.Pagination-module--pagination__next-link--3FUtA{color:#f7a046;font-size:1.625rem;font-weight:700}.Pagination-module--pagination__next-link--3FUtA:focus,.Pagination-module--pagination__next-link--3FUtA:hover{color:#5d93ff}.Pagination-module--pagination__next-link--disable--30UwZ{pointer-events:none;color:#bbb}.Author-module--author--2Yefr{border-top:1px solid #e6e6e6;max-width:40rem;padding-top:1.25rem;line-height:1.625rem;margin-top:1.625rem;margin-bottom:3.25rem}.Author-module--author__bio-twitter--n-O9n{display:block;text-decoration:underline}@media screen and (min-width:685px){.Author-module--author--2Yefr{margin-left:auto;margin-right:auto}}.Content-module--content--3p512{max-width:59.0625rem;padding:0 .9375rem;margin:0 auto}.Content-module--content__title--2BDW9{font-size:2rem;max-width:40rem;font-weight:600;text-align:center;line-height:2.68125rem;margin:1.625rem auto 0}.Content-module--content__body--2TrQ- figure{margin-bottom:1.625rem}.Content-module--content__body--2TrQ- figure blockquote{font-style:italic;text-align:center;margin-top:0;padding:1.625rem 0}.Content-module--content__body--2TrQ- figure blockquote p{max-width:40rem;font-size:1.6817rem;margin-top:0;margin-bottom:1.625rem;line-height:2.4375rem}.Content-module--content__body--2TrQ- a{text-decoration:underline}.Content-module--content__body--2TrQ- *{max-width:40rem;margin-left:auto;margin-right:auto}.Content-module--content__body--2TrQ- img{max-width:100%}@media screen and (min-width:960px){.Content-module--content--3p512{padding:0}.Content-module--content__title--2BDW9{font-size:3rem;line-height:3.65625rem;margin-top:3.65625rem;margin-bottom:2.4375rem}.Content-module--content__body--2TrQ-,.Content-module--content__body--2TrQ- p{font-size:1.125rem;line-height:1.82813rem;margin-bottom:1.82813rem}}.Meta-module--meta__date--29eD7{font-style:italic}.Tags-module--tags--1L_ct{margin-bottom:.8125rem}.Tags-module--tags__list--91FqN{list-style:none;margin:0 -.625rem;padding:0}.Tags-module--tags__list-item--1M30P{display:inline-block;margin:.625rem .3125rem}.Tags-module--tags__list-item-link--3SL_8{display:inline-block;height:2.1875rem;padding:0 1.5rem;line-height:2.1875rem;border:1px solid #e6e6e6;text-decoration:none;border-radius:1.25rem;color:#222}.Tags-module--tags__list-item-link--3SL_8:focus,.Tags-module--tags__list-item-link--3SL_8:hover{color:#5d93ff}.Post-module--post__comments--25y6I,.Post-module--post__footer--3WzWU{max-width:40rem;margin:0 auto;padding:0 .9375rem}.Post-module--post__home-button--16Kl0{display:block;max-width:5.625rem;height:2.1875rem;padding:0 1.5rem;line-height:2.1875rem;text-align:center;color:#222;border:1px solid #e6e6e6;border-radius:1.25rem;font-size:1rem;font-weight:400;margin-left:auto;margin-right:auto;margin-top:1.625rem}.Post-module--post__home-button--16Kl0:focus,.Post-module--post__home-button--16Kl0:hover{color:#5d93ff}@media screen and (min-width:960px){.Post-module--post__comments--25y6I,.Post-module--post__footer--3WzWU{padding:0}.Post-module--post__home-button--16Kl0{position:fixed;max-width:auto;margin:0;top:30px;left:30px}}</style><meta name="generator" content="Gatsby 2.29.3"/><link rel="alternate" type="application/rss+xml" title="Dev Continuum" href="/rss.xml"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=null"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'null', {"send_page_view":false});
      }
      </script><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="icon" href="/favicon-32x32.png?v=556b91ddf73ee67db228c9f7f507d81a" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#F7A046"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=556b91ddf73ee67db228c9f7f507d81a"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=556b91ddf73ee67db228c9f7f507d81a"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=556b91ddf73ee67db228c9f7f507d81a"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=556b91ddf73ee67db228c9f7f507d81a"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=556b91ddf73ee67db228c9f7f507d81a"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=556b91ddf73ee67db228c9f7f507d81a"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=556b91ddf73ee67db228c9f7f507d81a"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=556b91ddf73ee67db228c9f7f507d81a"/><title data-react-helmet="true">Hardware Transcoding - Dev Continuum</title><link data-react-helmet="true" rel="manifest" href="/manifest.json"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="180x180" href="data:image/png;base64,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"/><link data-react-helmet="true" rel="icon" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfgCxcRIBj7gpqmAAABRklEQVRIx9WUPUsDQRCGn3iSeEhQYmWjXBlBC8XCws5CQbSw0FKCoJ02YiMoiI1YWZifYGUhktLGKqRUsBEMCAp+YBKCaNTc2FyR4+7ccwrBd7vd99nZmR0G/r2sWK40ght+1BYDzzAR7TNfYLGCTUOf5AIl+vX4CDfkSWjxXs54Y1KL2+QRimR0eIJV3hG2tPGneEB4ZlSHZ7lAEArYGryHEwTBZdlkbQ/ZS7LBNABPlHF8zeZyx4e/VEHlOKATgE8ekZYTiwJrvP78pnFukYh1zbApJYdiJF5j3oTbHFKn2rLquB7eZDesYv4adDDgMzUZY58UAKcs8mL8v4DWvfhXDP4ehqTXDxXmNDg4lBG+2I45+gKapYFwTLcOhz2ES7JaPM05VWa0OAxxz2asuR2hJY7oMpmi77ew2aGmj5+iTz+N/1Lfk6NqvWnkWC8AAAAldEVYdGRhdGU6Y3JlYXRlADIwMTYtMTEtMjNUMTc6MzI6MjQrMDE6MDA0RI99AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE2LTExLTIzVDE3OjMyOjI0KzAxOjAwRRk3wQAAAFd6VFh0UmF3IHByb2ZpbGUgdHlwZSBpcHRjAAB4nOPyDAhxVigoyk/LzEnlUgADIwsuYwsTIxNLkxQDEyBEgDTDZAMjs1Qgy9jUyMTMxBzEB8uASKBKLgDqFxF08kI1lQAAAABJRU5ErkJggg==" type="image/png"/><link data-react-helmet="true" rel="icon" sizes="16x16" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfgCxcRIBj7gpqmAAAAoklEQVQoz2NgIBkwMrAhc5kwFGgyKOFTIM2QyPABtwJOhlqG3wwvcNuex/CcwRq389wZ3jDsZuBG1wUDGgwrGPQZjjHsYWBkYGZ4yLCY4TuyQhGGzQz/4fArQzJMghnuOWmGUwzHGe4zqDGwMExh6GP4i92qYIa/DLsYxHA7dCLDAwZj3NL8DLsY4lCFmFF4WgxMDHPQbUcGigwiDHgBI6YQAPtQH71KGBLRAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE2LTExLTIzVDE3OjMyOjI0KzAxOjAwNESPfQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNi0xMS0yM1QxNzozMjoyNCswMTowMEUZN8EAAABXelRYdFJhdyBwcm9maWxlIHR5cGUgaXB0YwAAeJzj8gwIcVYoKMpPy8xJ5VIAAyMLLmMLEyMTS5MUAxMgRIA0w2QDI7NUIMvY1MjEzMQcxAfLgEigSi4A6hcRdPJCNZUAAAAASUVORK5CYII=" type="image/png"/><link data-react-helmet="true" rel="mask-icon" color="#5bbad5" href="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDIwMDEwOTA0Ly9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAxL1JFQy1TVkctMjAwMTA5MDQvRFREL3N2ZzEwLmR0ZCI+CjxzdmcgdmVyc2lvbj0iMS4wIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiB3aWR0aD0iMjAwLjAwMDAwMHB0IiBoZWlnaHQ9IjIwMC4wMDAwMDBwdCIgdmlld0JveD0iMCAwIDIwMC4wMDAwMDAgMjAwLjAwMDAwMCIKIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIG1lZXQiPgo8bWV0YWRhdGE+CkNyZWF0ZWQgYnkgcG90cmFjZSAxLjExLCB3cml0dGVuIGJ5IFBldGVyIFNlbGluZ2VyIDIwMDEtMjAxMwo8L21ldGFkYXRhPgo8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjAwMDAwMCwyMDAuMDAwMDAwKSBzY2FsZSgwLjEwMDAwMCwtMC4xMDAwMDApIgpmaWxsPSIjMDAwMDAwIiBzdHJva2U9Im5vbmUiPgo8cGF0aCBkPSJNMTEyNCAxNjk0IGMtMzIgLTQyIC0xMzUgLTE3MyAtMjI5IC0yOTEgLTkzIC0xMTkgLTE5NyAtMjUxIC0yMzAKLTI5MyAtMzMgLTQzIC05OSAtMTI4IC0xNDggLTE4OSAtNDggLTYxIC04NyAtMTEyIC04NyAtMTE0IDAgLTIgMTI0IC0zIDI3NgotMyAxNTIgMSAyNzggLTIgMjgwIC02IDQgLTYgLTg3IC0zNTcgLTE0MSAtNTQzIC0zMyAtMTE0IC0zMSAtMTE0IDQwIC0yMCAzOAo1MCAxNjUgMjE4IDI4NCAzNzUgMTE4IDE1NyAyNDMgMzIyIDI3OCAzNjggMzUgNDUgNjIgODMgNjEgODMgLTIgMSAtMTMxIDIKLTI4OCAzIC0yNzQgMSAtMjg1IDIgLTI4MiAyMCAyIDExIDQ1IDEzMiA5NyAyNzAgMTI5IDM0OSAxNTMgNDE2IDE1MSA0MTYgLTIKMCAtMjkgLTM0IC02MiAtNzZ6Ii8+CjwvZz4KPC9zdmc+Cg=="/><meta data-react-helmet="true" name="description" content="Plex Transcoding with Nvidia GPUs"/><meta data-react-helmet="true" property="og:site_name" content="Hardware Transcoding - Dev Continuum"/><meta data-react-helmet="true" property="og:image" content="https://vincenttaverna.com/photo.jpg"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:title" content="Hardware Transcoding - Dev Continuum"/><meta data-react-helmet="true" name="twitter:description" content="Plex Transcoding with Nvidia GPUs"/><meta data-react-helmet="true" name="twitter:image" content="https://vincenttaverna.com/photo.jpg"/><link as="script" rel="preload" href="/webpack-runtime-298395186166afad779f.js"/><link as="script" rel="preload" href="/framework-55f7b2ba736e89fdc740.js"/><link as="script" rel="preload" href="/532a2f07-549094fa347c85980056.js"/><link as="script" rel="preload" href="/dc6a8720040df98778fe970bf6c000a41750d3ae-f1aaf66d03f12bc670e6.js"/><link as="script" rel="preload" href="/app-b910e5d95faabf1f2f33.js"/><link as="script" rel="preload" href="/styles-407fe62976dc5310c43e.js"/><link as="script" rel="preload" href="/cd95ea5cbd2c605f26db819f07999610c9ff4310-a81223223f0c1bfe284d.js"/><link as="script" rel="preload" href="/component---src-templates-post-template-js-32a004a3619ef9011e8d.js"/><link as="fetch" rel="preload" href="/page-data/posts/hardware-transcoding/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/251939775.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2857265606.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/401334301.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="Layout-module--layout--3Pyz6"><div><a class="Post-module--post__home-button--16Kl0" href="/">All Articles</a><div><div class="Content-module--content--3p512"><h1 class="Content-module--content__title--2BDW9">Hardware Transcoding</h1><div class="Content-module--content__body--2TrQ-"><p>This holiday season I had some down time. I was watching a home video on Plex when I noticed some artifacting on my Samsung TV. While this can be easily solved by transcoding all of my media to the lowest common denominator client device, it would require a lot of processing power and time to go through the entire content library. Additionally, without knowing which devices my family members all use, I would have no way of creating a reliable experience for them. For my own needs, changing to a client device that supports the media I was playing is the most straightforward solution. For those who are sharing their Plex with family and friends, you will want to look closer at your hardware.</p>
<h3 id="research" style="position:relative;"><a href="#research" aria-label="research permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Research</h3>
<p>I began researching why this was happening to my headless Ubuntu server. Starting with the hardware, I knew that out of the box, Plex will use your integrated graphics chip on the processor to handle any decoding or encoding, and will ultimately fallback to the CPU. The server in my basement today is currently running on fairly old hardware, the CPU is actually an <strong>i7-4790k</strong>. A quick search reveals an Intel specification <a href="https://ark.intel.com/content/www/us/en/ark/products/80807/intel-core-i7-4790k-processor-8m-cache-up-to-4-40-ghz.html" target="_blank" rel="nofollow noopener noreferrer">here</a>. This page explains that the CPU has the following Processor Graphics.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">Processor Graphics ‡ Intel® HD Graphics 4600
Graphics Base Frequency 350 MHz
Graphics Max Dynamic Frequency 1.25 GHz
Graphics Video Max Memory 2 GB
Graphics Output eDP/DP/HDMI/DVI/VGA
Execution Units 20
Max Resolution (HDMI)‡ 3840x2160@24Hz
Max Resolution (DP)‡ 3840x2160@60Hz
Max Resolution (eDP - Integrated Flat Panel)‡ 3840x2160@60Hz
Max Resolution (VGA)‡ 1920x1200@60Hz
DirectX* Support 11.2/12
OpenGL* Support 4.3
Intel® Quick Sync Video Yes
Intel® InTru™ 3D Technology Yes
Intel® Flexible Display Interface (Intel® FDI) Yes
Intel® Clear Video HD Technology Yes
# of Displays Supported ‡ 3
Device ID 0x412</code></pre></div>
<p>While the Intel® HD Graphics 4600 is very capable for it’s time, it isn’t as powerful as more modern integrated graphics. Using Intel’s integrated graphics worked well for years, and I highly recommend using it if your server has a newer chipset, such as a <a href="https://ark.intel.com/content/www/us/en/ark/products/graphics/126790/intel-uhd-graphics-630.html" target="_blank" rel="nofollow noopener noreferrer">UHD 630</a>. However, in my case, upgrading my entire 1150 LGA system was not within budget. So I looked at alternative solutions, such as a dedicated GPU.</p>
<h3 id="purchase" style="position:relative;"><a href="#purchase" aria-label="purchase permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Purchase</h3>
<p>Knowing that I wanted a dedicated GPU over an integrated one, I made a list of requirements comparing various GPUs on sale. Mainly something that was not too expensive (under $150), energy-efficient, and somewhat future-proof. Fortunately a <a href="https://www.elpamsoft.com/?p=Plex-Hardware-Transcoding" target="_blank" rel="nofollow noopener noreferrer">Plex Hardware Transcoding chart</a> was built that makes considering which GPU to get a breeze. I made note of the <code class="language-text">Quadro P3000 (6GB)</code>, <code class="language-text">GeForce GTX 1060 (6GB)</code>, <code class="language-text">Geforce GTX 1660 (6GB)</code>, and <code class="language-text">GeForce GTX 1660 Ti (6GB)</code> options.</p>
<p><a href="/plex/transcode_chart.png"><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 58.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAB+klEQVQoz4WTW2vVQBSFz9+p4Guh1oIXxEpR8cX/IAqC+O8s+G5VROGA9ljqLZlJctLE3DOX5dpz0lhUMDkrs/eZNR87ezKLqqpQliWK4gx1XaMoi5AbY2Ccg7E2yFLeeuCCznPnLNrB4n3ksPDeB3NYQABnwxhi+jfioiD3l+zs48MAC4bBLICR4zvTo3MehvEHxkvq1A5hUezP8MWn+OYzfKVk/M58aTp8NAOWtv8N5AOpM9hKI7weK5zYBjuZwo11jOdlLjaccvGxj7DyMccYnyi57+QK93ONvbXaAPthCMCMr72VxHgxKryyMYEa12l6WmZ0dTjxCT57NeuY0lC4TeBdAnfPgW3XsXUGP1yHS4nCIYFHVgXgzbXG41JxWcSK1D+B+wTeI/CqAL00h7+M/XnjYlxO9Ay8MgGflBopF/4PuPcn8MhFfGUdXlmA2wReo+kRK0wCMJ5hq9BDqVzhFj0HBO5cBK59gbfs23aa4OWoGbM6Ag9Y4bOpwpVT7KOeJLmG3A8Ie5gnBOtND+Vq2gYVpZoaP9s6xLppkFB527LPLZquQd2KZL4OcduJp0ZKX9Z30y73/Pa4Mb1szjhi5K4P/YCRueHcSIlnmMaRHpmXuO/62SfXQk7IIAAqnJapYonlc+qnOZGcKicnIxwMP+dyTEPO/38BhEmAIn5oX8UAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <picture>
        <source
          srcset="/static/1d8d7217084714347b1840fa58fcc11f/8ac56/transcode_chart.webp 240w,
/static/1d8d7217084714347b1840fa58fcc11f/d3be9/transcode_chart.webp 480w,
/static/1d8d7217084714347b1840fa58fcc11f/e46b2/transcode_chart.webp 960w,
/static/1d8d7217084714347b1840fa58fcc11f/f992d/transcode_chart.webp 1440w,
/static/1d8d7217084714347b1840fa58fcc11f/882b9/transcode_chart.webp 1920w,
/static/1d8d7217084714347b1840fa58fcc11f/9f71d/transcode_chart.webp 2246w"
          sizes="(max-width: 960px) 100vw, 960px"
          type="image/webp"
        />
        <source
          srcset="/static/1d8d7217084714347b1840fa58fcc11f/8ff5a/transcode_chart.png 240w,
/static/1d8d7217084714347b1840fa58fcc11f/e85cb/transcode_chart.png 480w,
/static/1d8d7217084714347b1840fa58fcc11f/d9199/transcode_chart.png 960w,
/static/1d8d7217084714347b1840fa58fcc11f/07a9c/transcode_chart.png 1440w,
/static/1d8d7217084714347b1840fa58fcc11f/29114/transcode_chart.png 1920w,
/static/1d8d7217084714347b1840fa58fcc11f/e8f1b/transcode_chart.png 2246w"
          sizes="(max-width: 960px) 100vw, 960px"
          type="image/png"
        />
        <img
          class="gatsby-resp-image-image"
          src="/static/1d8d7217084714347b1840fa58fcc11f/d9199/transcode_chart.png"
          alt="Screenshot of 1080p to 720p GPU Transcode Comparison"
          title="Screenshot of 1080p to 720p GPU Transcode Comparison"
          loading="lazy"
          style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        />
      </picture>
    </span></a></p>
<p>Looking at the chart above, these GPUs can support upto twenty simultaneous transcode streams. While all the GeForce GTX GPUs are limited to three simultaneous transcodes, a <a href="https://github.com/keylase/nvidia-patch" target="_blank" rel="nofollow noopener noreferrer">driver patch</a> can be applied on Windows and Linux to remove this unnecessary limitation. Once the limitation is removed, the devices are capable of a theoretically unlimited number of transcode sessions. The next likely bottleneck for the GPU to run into is VRAM, and the options I chose above, all have 6GBs memory (while the Intel® HD Graphics 4600 had a measly 2GB). Of course, if you just go with a Quadro GPU instead, you don’t have to deal with this headache. However, Quadro GPUs tend to be more expensive, which makes them a less desirable option in this scenario, but they are certainly the easier choice.</p>
<p>And so my hunt for a GPU began. I shopped around, and found some decent deals, but nothing was as good as what I saw on eBay, OfferUp, Mercari, and Craigslist. After being outbid on a couple <code class="language-text">GeForce GTX 1660 (6GB)</code>, I ended up snagging an MSI Aero <code class="language-text">GeForce GTX 1060 (6 GB)</code> in an ITX Form Factor on Mercari for $100. The GPU arrived in the mail in 5 days, and was in really great condition.</p>
<p><a href="/plex/msi_aero_1060_6gb_itx.jpg"><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIEAQX/xAAWAQEBAQAAAAAAAAAAAAAAAAABAAL/2gAMAwEAAhADEAAAAeZlE+VxSf/EABoQAAICAwAAAAAAAAAAAAAAAAABEiEDERP/2gAIAQEAAQUC5VAWM2yiR//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAQEBAAAAAAAAAAAAAAAAABAxEf/aAAgBAQAGPwLSlP/EABwQAAICAgMAAAAAAAAAAAAAAAERACExcVFhkf/aAAgBAQABPyGjDWowWA7EArg2NcYcPf5N5//aAAwDAQACAAMAAAAQjM//xAAVEQEBAAAAAAAAAAAAAAAAAAAAIf/aAAgBAwEBPxBH/8QAFREBAQAAAAAAAAAAAAAAAAAAACH/2gAIAQIBAT8QV//EABwQAQADAAIDAAAAAAAAAAAAAAEAESExUWFx4f/aAAgBAQABPxAd+Odxy2EtNRaj71PqCAgJZbDPMQXSs+JjtfZP/9k='); background-size: cover; display: block;"
  ></span>
  <picture>
        <source
          srcset="/static/1daba3ddbf4504ed4e0a30567fc08633/8ac56/msi_aero_1060_6gb_itx.webp 240w,
/static/1daba3ddbf4504ed4e0a30567fc08633/d3be9/msi_aero_1060_6gb_itx.webp 480w,
/static/1daba3ddbf4504ed4e0a30567fc08633/e46b2/msi_aero_1060_6gb_itx.webp 960w,
/static/1daba3ddbf4504ed4e0a30567fc08633/f992d/msi_aero_1060_6gb_itx.webp 1440w,
/static/1daba3ddbf4504ed4e0a30567fc08633/882b9/msi_aero_1060_6gb_itx.webp 1920w,
/static/1daba3ddbf4504ed4e0a30567fc08633/b33a3/msi_aero_1060_6gb_itx.webp 4032w"
          sizes="(max-width: 960px) 100vw, 960px"
          type="image/webp"
        />
        <source
          srcset="/static/1daba3ddbf4504ed4e0a30567fc08633/09b79/msi_aero_1060_6gb_itx.jpg 240w,
/static/1daba3ddbf4504ed4e0a30567fc08633/7cc5e/msi_aero_1060_6gb_itx.jpg 480w,
/static/1daba3ddbf4504ed4e0a30567fc08633/6a068/msi_aero_1060_6gb_itx.jpg 960w,
/static/1daba3ddbf4504ed4e0a30567fc08633/644c5/msi_aero_1060_6gb_itx.jpg 1440w,
/static/1daba3ddbf4504ed4e0a30567fc08633/0f98f/msi_aero_1060_6gb_itx.jpg 1920w,
/static/1daba3ddbf4504ed4e0a30567fc08633/d2602/msi_aero_1060_6gb_itx.jpg 4032w"
          sizes="(max-width: 960px) 100vw, 960px"
          type="image/jpeg"
        />
        <img
          class="gatsby-resp-image-image"
          src="/static/1daba3ddbf4504ed4e0a30567fc08633/6a068/msi_aero_1060_6gb_itx.jpg"
          alt="Photo of the GeForce GTX 1060 (6GB)"
          title="Photo of the GeForce GTX 1060 (6GB)"
          loading="lazy"
          style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        />
      </picture>
    </span></a></p>
<h3 id="installation" style="position:relative;"><a href="#installation" aria-label="installation permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h3>
<p>Installing the GeForce GTX 1660 inside of my server was easy. I shut down the computer safely, and unplugged all of my peripheral devices. Removed the metallic door on the server, and took a peek inside. Despite the machines age, it is in pretty good condition, at least when ignoring the hideous cable management.</p>
<p><a href="/plex/ugly_server_internals.jpg"><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 133.33333333333331%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAMBAgQF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAHltpXNYZg0WSuoJD//xAAeEAACAQMFAAAAAAAAAAAAAAABAhEAAxIEEBMxQf/aAAgBAQABBQIkm5qE47lqMQtPlPsmmaQ3ZJgE7f/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABwQAAEEAwEAAAAAAAAAAAAAAAEAEBEhEiAiQf/aAAgBAQAGPwI36sQSVbdGVTRr/8QAHhABAAMAAgIDAAAAAAAAAAAAAQARITFREEFhcZH/2gAIAQEAAT8h0RT2l2MoeYrObc0z40gV3XbFRekC4Nm+/amMb9QypZsLa8f/2gAMAwEAAgADAAAAEMw4cP/EABYRAQEBAAAAAAAAAAAAAAAAABEAEP/aAAgBAwEBPxAmc//EABYRAQEBAAAAAAAAAAAAAAAAAAAREP/aAAgBAgEBPxBEz//EABsQAQEAAwEBAQAAAAAAAAAAAAERACExQXFR/9oACAEBAAE/EF40jUTeMTGh/RcV7TtXkMItzaeh8MUMElKnmdwJtk8xh9R5dGHxG0UB9wCiBDfHMkCruORbIbL3AEz/2Q=='); background-size: cover; display: block;"
  ></span>
  <picture>
        <source
          srcset="/static/10f2f97536a3f2d436d7025b98b7dc12/8ac56/ugly_server_internals.webp 240w,
/static/10f2f97536a3f2d436d7025b98b7dc12/d3be9/ugly_server_internals.webp 480w,
/static/10f2f97536a3f2d436d7025b98b7dc12/e46b2/ugly_server_internals.webp 960w,
/static/10f2f97536a3f2d436d7025b98b7dc12/f992d/ugly_server_internals.webp 1440w,
/static/10f2f97536a3f2d436d7025b98b7dc12/882b9/ugly_server_internals.webp 1920w,
/static/10f2f97536a3f2d436d7025b98b7dc12/e51ec/ugly_server_internals.webp 3024w"
          sizes="(max-width: 960px) 100vw, 960px"
          type="image/webp"
        />
        <source
          srcset="/static/10f2f97536a3f2d436d7025b98b7dc12/09b79/ugly_server_internals.jpg 240w,
/static/10f2f97536a3f2d436d7025b98b7dc12/7cc5e/ugly_server_internals.jpg 480w,
/static/10f2f97536a3f2d436d7025b98b7dc12/6a068/ugly_server_internals.jpg 960w,
/static/10f2f97536a3f2d436d7025b98b7dc12/644c5/ugly_server_internals.jpg 1440w,
/static/10f2f97536a3f2d436d7025b98b7dc12/0f98f/ugly_server_internals.jpg 1920w,
/static/10f2f97536a3f2d436d7025b98b7dc12/9568a/ugly_server_internals.jpg 3024w"
          sizes="(max-width: 960px) 100vw, 960px"
          type="image/jpeg"
        />
        <img
          class="gatsby-resp-image-image"
          src="/static/10f2f97536a3f2d436d7025b98b7dc12/6a068/ugly_server_internals.jpg"
          alt="Ugly Photo of the inside of the Server"
          title="Ugly Photo of the inside of the Server"
          loading="lazy"
          style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        />
      </picture>
    </span></a></p>
<p>After grabbing a 6-Pin PCI-E cable for the power supply and plugging in the graphics card, I was ready to turn the machine on. Expecting everything to go off without a hitch, I was sorely disappointed when video was no longer being displayed. Neither via the new GPU or the old. It seemed pretty clear to me that the computer was not POSTing. I knew that my 750 Watt PSU was capable of supplying enough power to support this 120 Watt (Max) Graphics Card, so I knew to look elsewhere.</p>
<p>Removing the Graphics Card alleviated the issue, but of course that is not the goal. I reexamined the setup and found the culprit to be the motherboards Voltage Protection. After changing the outlet that my server is plugged into in the APC Battery Backup, everything started working as expected. I suspected this was the issue, due to the fact that when plugged directly into a wall outlet, the computer booted. The Battery Backup only has around a 8% load, so it is certainly not drawing too much from it. If I had to guess, I’d say the older ASUS chipset on my motherboard likely has some protections in place that are misfiring. If anyone is more familiar with battery backups, I’d be interested to hear your thoughts on why this happens. I am just glad it was such an easy fix.</p>
<h3 id="nvidia-drivers" style="position:relative;"><a href="#nvidia-drivers" aria-label="nvidia drivers permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Nvidia Drivers</h3>
<p>Before running the <code class="language-text">nvidia-patch</code> to remove the limitation on the GeForce GTX 1060 I needed to install the approriate nvidia drivers. While you can follow the instructions as described in the <a href="https://github.com/keylase/nvidia-patch" target="_blank" rel="nofollow noopener noreferrer">Github README</a> of <code class="language-text">nvidia-patch</code>, you can also do this using your OS’ package manager.</p>
<p>I started by running the following command, which recommended a driver for my graphics card. Below you can see the recommended driver is <code class="language-text">nvidia-driver-455</code>. This happened to be the same one <code class="language-text">nvidia-patch</code> recommended, so if you have a different list, keep an eye out that the driver is compatible with the patch you are applying.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">sudo</span> ubuntu-drivers devices
<span class="token operator">==</span> /sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0 <span class="token operator">==</span>
modalias <span class="token builtin class-name">:</span> pci:v000010DEd00001C03sv00001462sd00003283bc03sc00i00
vendor   <span class="token builtin class-name">:</span> NVIDIA Corporation
model    <span class="token builtin class-name">:</span> GP106 <span class="token punctuation">[</span>GeForce GTX <span class="token number">1060</span> 6GB<span class="token punctuation">]</span>
driver   <span class="token builtin class-name">:</span> nvidia-driver-390 - distro non-free
driver   <span class="token builtin class-name">:</span> nvidia-driver-450 - distro non-free
driver   <span class="token builtin class-name">:</span> nvidia-driver-450-server - distro non-free
driver   <span class="token builtin class-name">:</span> nvidia-driver-455 - distro non-free recommended
driver   <span class="token builtin class-name">:</span> nvidia-driver-418-server - distro non-free
driver   <span class="token builtin class-name">:</span> nvidia-driver-440-server - distro non-free
driver   <span class="token builtin class-name">:</span> xserver-xorg-video-nouveau - distro <span class="token function">free</span> <span class="token builtin class-name">builtin</span></code></pre></div>
<p>Next I installed the recommended driver for my graphics card and rebooted.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> nvidia-driver-455
$ <span class="token function">sudo</span> <span class="token function">reboot</span></code></pre></div>
<p>I checked that the driver was installed successfully after rebooting by running <code class="language-text">nvidia-smi</code>. Normally this would work as expected. Unfortunately my server BIOS had been configured to enable Secure Boot. On many modern motherboards you can just run the following command to import the secure key so that the OS will allow the driver to run.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">sudo</span> mokutil --import /var/lib/shim-signed/mok/MOK.der</code></pre></div>
<p>After rebooting, the driver was not available, and <code class="language-text">mokutil</code> failed with every command, including when using the <code class="language-text">--import</code> argument. After a bit of digging, I learned that on some motherboards, you can enroll keys in the BIOS SecureBoot setup. After installing the nvidia driver via apt, you’ll find the necessary key blob data in <code class="language-text">/var/lib/shim-signed/mok</code> named <code class="language-text">MOK.der</code>. This file is unique to my computer, and future driver installs will be signed with the same key.</p>
<p>I copied the <code class="language-text">MOK.der</code> to a USB, and then rebooted into the BIOS. For my BIOS, I enabled <code class="language-text">Advanced Mode</code> and then navigated to <code class="language-text">Boot/SecureBoot/KeyManagement</code>. Here I found a lot of different options, but the one I needed was called <code class="language-text">Append to Default DB</code>. A prompt appeared when selecting this option, choosing <code class="language-text">No</code> allowed me to select a file from the USB. After selecting the <code class="language-text">MOK.der</code> from the USB, a prompt popped up asking what type of data the file contains. I chose <code class="language-text">Blob Data</code> and then saved (pressed F10) and rebooted.</p>
<p>Once the computer restarted, I ran <code class="language-text">nvidia-smi</code>. Finally the driver was installed and running.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ nvidia-smi
Sat Dec <span class="token number">19</span> <span class="token number">17</span>:38:11 <span class="token number">2020</span>
+-----------------------------------------------------------------------------+
<span class="token operator">|</span> NVIDIA-SMI <span class="token number">455.38</span>       Driver Version: <span class="token number">455.38</span>       CUDA Version: <span class="token number">11.1</span>     <span class="token operator">|</span>
<span class="token operator">|</span>-------------------------------+----------------------+----------------------+
<span class="token operator">|</span> GPU  Name        Persistence-M<span class="token operator">|</span> Bus-Id        Disp.A <span class="token operator">|</span> Volatile Uncorr. ECC <span class="token operator">|</span>
<span class="token operator">|</span> Fan  Temp  Perf  Pwr:Usage/Cap<span class="token operator">|</span>         Memory-Usage <span class="token operator">|</span> GPU-Util  Compute M. <span class="token operator">|</span>
<span class="token operator">|</span>                               <span class="token operator">|</span>                      <span class="token operator">|</span>               MIG M. <span class="token operator">|</span>
<span class="token operator">|</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">+=</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">+=</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token number">0</span>  GeForce GTX <span class="token number">106</span><span class="token punctuation">..</span>.  Off  <span class="token operator">|</span> 00000000:01:00.0  On <span class="token operator">|</span>                  N/A <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">0</span>%   33C    P8     4W / 120W <span class="token operator">|</span>      4MiB /  6075MiB <span class="token operator">|</span>      <span class="token number">0</span>%      Default <span class="token operator">|</span>
<span class="token operator">|</span>                               <span class="token operator">|</span>                      <span class="token operator">|</span>                  N/A <span class="token operator">|</span>
+-------------------------------+----------------------+----------------------+

+-----------------------------------------------------------------------------+
<span class="token operator">|</span> Processes:                                                                  <span class="token operator">|</span>
<span class="token operator">|</span>  GPU   GI   CI        PID   Type   Process name                  GPU Memory <span class="token operator">|</span>
<span class="token operator">|</span>        ID   ID                                                   Usage      <span class="token operator">|</span>
<span class="token operator">|</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">|</span>
<span class="token operator">|</span>  No running processes found                                                 <span class="token operator">|</span>
+-----------------------------------------------------------------------------+</code></pre></div>
<h3 id="plex-and-docker" style="position:relative;"><a href="#plex-and-docker" aria-label="plex and docker permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Plex and Docker</h3>
<p>Now that the driver was functioning properly, and the graphics device appeared under <code class="language-text">/dev/dri</code> I could configure Plex to use it. Currently, I run Plex within a container using Docker. To use a nvidia GPU with docker I had to follow the Nvidia docker documentation <a href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/install-guide.html#docker" target="_blank" rel="nofollow noopener noreferrer">here</a>. So I ran the following command, as described in the documentation.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">sudo</span> <span class="token function">apt</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">apt</span> <span class="token function">install</span> -y nvidia-docker2</code></pre></div>
<p>Since I use <code class="language-text">docker-compose</code>, I assumed I would need to update the <code class="language-text">docker-compose.yml</code> file where the plex service is defined. Although the devices don’t need to change because I previously configured Intel Quick Sync transcoding, it is important that we set the appropriate environment variables. For us to get full hardware transcoding functioning correctly, we must set <code class="language-text">NVIDIA_VISIBLE_DEVICES=all</code> and <code class="language-text">NVIDIA_DRIVER_CAPABILITIES=compute,video,utility</code>. This will allow all of our Nvidia graphics devices and the associated libraries to be accessible from within the docker container. See my updated <code class="language-text">docker-compose.yml</code> below which includes both environment variables.</p>
<div class="gatsby-highlight" data-language="yml"><pre class="language-yml"><code class="language-yml"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.7'</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">plex</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> plexinc/pms<span class="token punctuation">-</span>docker<span class="token punctuation">:</span>latest
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> PLEX_UID=0
      <span class="token punctuation">-</span> PLEX_GID=0
      <span class="token punctuation">-</span> TZ=$<span class="token punctuation">{</span>TZ<span class="token punctuation">}</span>
      <span class="token punctuation">-</span> CHANGE_CONFIG_DIR_OWNERSHIP=true
      <span class="token punctuation">-</span> NVIDIA_VISIBLE_DEVICES=all
      <span class="token punctuation">-</span> NVIDIA_DRIVER_CAPABILITIES=compute<span class="token punctuation">,</span>video<span class="token punctuation">,</span>utility
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 32400<span class="token punctuation">:</span>32400/tcp
      <span class="token punctuation">-</span> 3005<span class="token punctuation">:</span>3005/tcp
      <span class="token punctuation">-</span> 8324<span class="token punctuation">:</span>8324/tcp
      <span class="token punctuation">-</span> 32469<span class="token punctuation">:</span>32469/tcp
      <span class="token punctuation">-</span> 1900<span class="token punctuation">:</span>1900/udp
      <span class="token punctuation">-</span> 32410<span class="token punctuation">:</span>32410/udp
      <span class="token punctuation">-</span> 32412<span class="token punctuation">:</span>32412/udp
      <span class="token punctuation">-</span> 32413<span class="token punctuation">:</span>32413/udp
      <span class="token punctuation">-</span> 32414<span class="token punctuation">:</span>32414/udp
    <span class="token key atrule">devices</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /dev/dri<span class="token punctuation">:</span>/dev/dri
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> $<span class="token punctuation">{</span>CONFIG_ROOT<span class="token punctuation">}</span>/config/plex/db<span class="token punctuation">:</span>/config
      <span class="token punctuation">-</span> $<span class="token punctuation">{</span>CONFIG_ROOT<span class="token punctuation">}</span>/config/plex/transcode<span class="token punctuation">:</span>/transcode</code></pre></div>
<p>I use version 3.7 of <code class="language-text">docker-compose</code>, so unfortunately configuring the nvidia runtime is a bit more indirect. If you use the version 2 configuration of <code class="language-text">docker-compose</code> you can just add <code class="language-text">runtime: nvidia</code> to the <code class="language-text">docker-compose.yml</code> instead. But for 3.7 I needed to update the <code class="language-text">/etc/docker/daemon.json</code> with the following.</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
    <span class="token property">"default-runtime"</span><span class="token operator">:</span> <span class="token string">"nvidia"</span><span class="token punctuation">,</span>
    <span class="token property">"runtimes"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"nvidia"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"nvidia-container-runtime"</span><span class="token punctuation">,</span>
            <span class="token property">"runtimeArgs"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Now that I have docker configured to use the nvidia runtime, I need to restart the docker service. This can be easily done on Ubuntu server by executing the following command.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">sudo</span> <span class="token function">service</span> docker restart</code></pre></div>
<p>Then I restarted the services that manage my container orchestration.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">sudo</span> <span class="token function">service</span> theater restart</code></pre></div>
<p>I verified that the correct libraries were made available to the container using the following command.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ docker <span class="token builtin class-name">exec</span> -it plex ldconfig -p <span class="token operator">|</span> <span class="token function">grep</span> -i nvidia
  libnvidia-ptxjitcompiler.so.1 <span class="token punctuation">(</span>libc6,x86-64<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> /usr/lib/x86_64-linux-gnu/libnvidia-ptxjitcompiler.so.1
  libnvidia-opticalflow.so.1 <span class="token punctuation">(</span>libc6,x86-64<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> /usr/lib/x86_64-linux-gnu/libnvidia-opticalflow.so.1
  libnvidia-opencl.so.1 <span class="token punctuation">(</span>libc6,x86-64<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> /usr/lib/x86_64-linux-gnu/libnvidia-opencl.so.1
  libnvidia-ml.so.1 <span class="token punctuation">(</span>libc6,x86-64<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> /usr/lib/x86_64-linux-gnu/libnvidia-ml.so.1
  libnvidia-encode.so.1 <span class="token punctuation">(</span>libc6,x86-64<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> /usr/lib/x86_64-linux-gnu/libnvidia-encode.so.1
  libnvidia-compiler.so.455.38 <span class="token punctuation">(</span>libc6,x86-64<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> /usr/lib/x86_64-linux-gnu/libnvidia-compiler.so.455.38
  libnvidia-cfg.so.1 <span class="token punctuation">(</span>libc6,x86-64<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> /usr/lib/x86_64-linux-gnu/libnvidia-cfg.so.1
  libnvidia-allocator.so.1 <span class="token punctuation">(</span>libc6,x86-64<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> /usr/lib/x86_64-linux-gnu/libnvidia-allocator.so.1</code></pre></div>
<p>Then verified <code class="language-text">nvidia-smi</code> functions as expected.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ docker <span class="token builtin class-name">exec</span> -it plex nvidia-smi</code></pre></div>
<p>I saw the same output as before when running <code class="language-text">nvidia-smi</code> so I knew the container had access to the graphics device. Now we just need to make sure plex is able to transcode media. I played the video that was originally producing artifacts on my TV. On another device, I opened a browser, navigated to my plex server, and then went from Settings to Manage / Console. Here I could filter the Console logs however I wanted.</p>
<p>For those adverse to using the Plex dashboard, you can easily do this on the server like so.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">tail</span> -f plex/db/Library/Application<span class="token punctuation">\</span> Support/Plex<span class="token punctuation">\</span> Media<span class="token punctuation">\</span> Server/Logs/Plex<span class="token punctuation">\</span> Media<span class="token punctuation">\</span> Server.log <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"TPU:"</span></code></pre></div>
<p>If I filter by <strong>TPU:</strong> or <strong>MDE:</strong> I can see what device is being used for transcoding and why transcoding is happening. <a href="https://forums.plex.tv/t/transcoding-with-gpu/444318/19" target="_blank" rel="nofollow noopener noreferrer">Below is a helpful list</a> of terms I found that can be used for debugging.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">MDE:
TPU:
ffmpeg
codec
decoder
encoder
hardware</code></pre></div>
<p>The output shows the following when filtered by <strong>TPU:</strong>.</p>
<div class="gatsby-highlight" data-language="log"><pre class="language-log"><code class="language-log">Dec 19, 2020 13:36:34.912 [0x7fea797fa700] DEBUG - [Transcode] TPU: hardware transcoding: using hardware decode accelerator nvdec
Dec 19, 2020 13:36:34.912 [0x7fea797fa700] DEBUG - [Transcode] TPU: hardware transcoding: zero-copy support present
Dec 19, 2020 13:36:34.912 [0x7fea797fa700] DEBUG - [Transcode] TPU: hardware transcoding: using zero-copy transcoding
Dec 19, 2020 13:36:34.912 [0x7fea797fa700] DEBUG - [Transcode] TPU: hardware transcoding: final decoder: nvdec, final encoder: nvenc</code></pre></div>
<p>Analyzing these logs, I saw that both <strong>nvdec</strong> (Nvidia Decoding) and <strong>nvenc</strong> (Nvidia Encoding) were being used when hardware transcoding. While Plex was busy, I also ran <code class="language-text">watch -n 0.5 nvidia-smi</code> in a separate tmux session. This made it easy to monitor the GPU temperature, usage, and power draw. Fortunately, while idle the GPU stays around <strong>35° Celsius</strong> and draws <strong>~4 Watts</strong>. During load on two streams I saw the temperatures rise 13° to <strong>48° Celsius</strong> and wattage increase to <strong>~35 Watts</strong>. While the GPU has its own limitations, Plex will fallback to the CPU if it can’t use the GPU for some reason, such as an unsupported format or the GPU being too busy. However, it is not capable of load balancing between multiple GPUs such as multiple GeForce GTX 1060s or the Intel® HD Graphics 4600 coprocessor.</p>
<h3 id="was-it-all-worth-it" style="position:relative;"><a href="#was-it-all-worth-it" aria-label="was it all worth it permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Was it all worth it?</h3>
<p>I can now watch videos without weird artifacts appearing on my TV, and my family and friends can do so without having to worry so much about which device they are using. If you are interested in reading more about hardware accelerated streaming with Plex, they have a great article on the subject <a href="https://support.plex.tv/articles/115002178853-using-hardware-accelerated-streaming/" target="_blank" rel="nofollow noopener noreferrer">here</a>. While this was an afforable and fun upgrade for my server, your system will likely have different needs and requirements. If you are building from scratch, the easiest path will certainly be to get an Intel processor that has powerful integrated graphics. The newer (2021) <a href="https://en.wikipedia.org/wiki/Rocket_Lake#GPU" target="_blank" rel="nofollow noopener noreferrer">Rocket Lake</a> processors for example will support hardware decoding for HEVC 12-bit, 4:2:2/4:4:4; VP9 12-bit 4:4:4 and AV1 8K 10-bit 4:2:0. When considering building a Plex Server of your own, I recommend reusing what you can. Many users of Plex have it running on nothing but a Raspberry PI, but for those users, you can be sure they are mostly utilizing direct play over transcoding.</p></div></div></div><div class="Post-module--post__footer--3WzWU"><div><p class="Meta-module--meta__date--29eD7">Published <!-- -->Dec 19, 2020</p></div><div class="Tags-module--tags--1L_ct"><ul class="Tags-module--tags__list--91FqN"><li class="Tags-module--tags__list-item--1M30P"><a class="Tags-module--tags__list-item-link--3SL_8" href="/tag/plex/">plex</a></li><li class="Tags-module--tags__list-item--1M30P"><a class="Tags-module--tags__list-item-link--3SL_8" href="/tag/nvidia/">nvidia</a></li><li class="Tags-module--tags__list-item--1M30P"><a class="Tags-module--tags__list-item-link--3SL_8" href="/tag/transcoding/">transcoding</a></li><li class="Tags-module--tags__list-item--1M30P"><a class="Tags-module--tags__list-item-link--3SL_8" href="/tag/linux/">linux</a></li><li class="Tags-module--tags__list-item--1M30P"><a class="Tags-module--tags__list-item-link--3SL_8" href="/tag/ubuntu/">ubuntu</a></li></ul></div><div class="Author-module--author--2Yefr"><p>Software Engineer<a class="Author-module--author__bio-twitter--n-O9n" href="https://www.twitter.com/kidtheflash" rel="noopener noreferrer" target="_blank"><strong>Vincent Taverna</strong> on Twitter</a></p></div></div><div class="Post-module--post__comments--25y6I"><div><div id="disqus_thread"></div></div></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/hardware-transcoding";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-16a5f8861b5c4d3834d4.js"],"app":["/app-b910e5d95faabf1f2f33.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-999e66766b99e2071776.js"],"component---src-templates-categories-list-template-js":["/component---src-templates-categories-list-template-js-2181ec47d28e5c35d3e9.js"],"component---src-templates-category-template-js":["/component---src-templates-category-template-js-80d7889eeb6395877420.js"],"component---src-templates-index-template-js":["/component---src-templates-index-template-js-ca748dd912acdce40443.js"],"component---src-templates-not-found-template-js":["/component---src-templates-not-found-template-js-658f4507169e2836a377.js"],"component---src-templates-page-template-js":["/component---src-templates-page-template-js-d8aeb4e67f2e8af3e6cd.js"],"component---src-templates-post-template-js":["/component---src-templates-post-template-js-32a004a3619ef9011e8d.js"],"component---src-templates-tag-template-js":["/component---src-templates-tag-template-js-4ec669dfbc1ce8819e34.js"],"component---src-templates-tags-list-template-js":["/component---src-templates-tags-list-template-js-2d7007993fc2bf0f9caf.js"]};/*]]>*/</script><script src="/polyfill-16a5f8861b5c4d3834d4.js" nomodule=""></script><script src="/component---src-templates-post-template-js-32a004a3619ef9011e8d.js" async=""></script><script src="/cd95ea5cbd2c605f26db819f07999610c9ff4310-a81223223f0c1bfe284d.js" async=""></script><script src="/styles-407fe62976dc5310c43e.js" async=""></script><script src="/app-b910e5d95faabf1f2f33.js" async=""></script><script src="/dc6a8720040df98778fe970bf6c000a41750d3ae-f1aaf66d03f12bc670e6.js" async=""></script><script src="/532a2f07-549094fa347c85980056.js" async=""></script><script src="/framework-55f7b2ba736e89fdc740.js" async=""></script><script src="/webpack-runtime-298395186166afad779f.js" async=""></script></body></html>